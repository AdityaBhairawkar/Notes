
Great question! As a DevOps engineer working with **Sonatype Nexus Repository**, knowing how to **delete artifacts via the REST API** is crucial for automation, cleanup, and managing storage. Letâ€™s break it all down â€” in simple terms, with practical explanations and examples.

---

## ğŸ”§ **WHAT YOUâ€™RE DOING:**

You are using **Nexus REST API** to:

1. **List components** (to get their unique IDs)
    
2. **Delete a specific component** (by using its ID)
    

This is especially useful when:

- You want to automate cleanup
    
- You uploaded the wrong version
    
- Your blob store is running out of space
    

---

## ğŸ“¦ 1. **Find Component ID (List Artifacts)**

**ğŸ”¤ Command:**

```bash
curl -u <username>:<password> \
  "http://<nexus-host>:8081/service/rest/v1/components?repository=<repository-name>"
```

### ğŸ” Example:

```bash
curl -u admin:admin123 \
  "http://localhost:8081/service/rest/v1/components?repository=my-maven-repo"
```

### ğŸ§  What It Does:

- Connects to Nexus
    
- Authenticates with the given credentials
    
- Lists all artifacts (components) in the given repository
    
- Returns JSON containing **component IDs**
    

---

## ğŸ“¥ Sample JSON Response:

```json
{
  "items": [
    {
      "id": "abcd1234-5678-90ef-ghij-klmnopqrstuv",
      "repository": "my-maven-repo",
      "format": "maven2",
      "group": "com.example",
      "name": "string-utils",
      "version": "1.0.0"
    }
  ],
  "continuationToken": null
}
```

### ğŸ”‘ Important Info:

- `"id"` is what you need to **delete** the component.
    
- You can also see the `group`, `name`, and `version` for clarity.
    

---

## ğŸ—‘ï¸ 2. **Delete Component (Using ID)**

**ğŸ”¤ Command:**

```bash
curl -u <username>:<password> -X DELETE \
  "http://<nexus-host>:8081/service/rest/v1/components/<component-id>"
```

### ğŸ§ª Example:

```bash
curl -u admin:admin123 -X DELETE \
  "http://localhost:8081/service/rest/v1/components/abcd1234-5678-90ef-ghij-klmnopqrstuv"
```

### ğŸ’£ What Happens:

- Nexus deletes the entire component (e.g., a full version of a library)
    
- This also deletes all files (JAR, POM, metadata, etc.) related to that version
    

---

## ğŸš€ Other Realistic Examples

### âœ… Delete from a snapshots repository:

```bash
curl -u aditya:654321 -X DELETE \
  "http://192.168.1.38:8081/service/rest/v1/components/a1b2c3d4-5678-9012-efgh-ijklmnopqrst"
```

### âœ… Get list from `maven-releases`:

```bash
curl -u aditya:654321 \
  "http://192.168.1.38:8081/service/rest/v1/components?repository=maven-releases"
```

---

## ğŸ§  TIPS for DevOps Engineers

|Tip|Why It Matters|
|---|---|
|ğŸ” Use secure credentials (use `--netrc` or secret store)|Avoid exposing passwords in shell history|
|ğŸª“ Delete carefully|There's **no undo** â€“ one ID can delete an entire version|
|ğŸ” Paginate with `continuationToken`|If you have many components, Nexus returns paginated results|
|âš™ï¸ Automate with scripts|Use this in cleanup jobs with `cron` or CI pipelines|
|ğŸ“œ Use logging|Log what you delete (component name, version, ID) for auditing|

---

## ğŸ§° BONUS: Script to List and Delete

Hereâ€™s a simple **bash script** example:

```bash
#!/bin/bash

REPO="maven-releases"
NEXUS_USER="admin"
NEXUS_PASS="admin123"
NEXUS_URL="http://localhost:8081"

# Step 1: Get all component IDs
COMPONENT_IDS=$(curl -s -u $NEXUS_USER:$NEXUS_PASS \
  "$NEXUS_URL/service/rest/v1/components?repository=$REPO" | jq -r '.items[].id')

# Step 2: Loop through and delete
for ID in $COMPONENT_IDS; do
  echo "Deleting component ID: $ID"
  curl -u $NEXUS_USER:$NEXUS_PASS -X DELETE \
    "$NEXUS_URL/service/rest/v1/components/$ID"
done
```

---

## âœ… Summary

|Step|Action|
|---|---|
|1ï¸âƒ£|List artifacts using `GET /components?repository=<repo>`|
|2ï¸âƒ£|Copy the `"id"` from the JSON|
|3ï¸âƒ£|Delete using `DELETE /components/<id>`|

Let me know if you'd like a version of this using Python, or if you're working with a specific repo like NuGet or Docker!